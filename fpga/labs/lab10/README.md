# Lab 10 Instructions

In this lab we implement an **8-bit Pulse-Width Modulation (PWM) generator** using a simple free-running counter and a binary comparator.

As a first step, open a terminal and go inside the `lab10/` directory :

```
% cd Desktop/lae/fpga/labs/lab10
```

Copy from the `.solutions/` directory the main `Makefile` already prepared for you :

```
% cp .solutions/Makefile .
```

Explore available targets :

```
% make help
```

Create a new fresh working area :

```
% make area
```

Additionally, copy from the `.solutions/` directory the following **Tcl simulation scripts** :


```
% cp .solutions/scripts/sim/compile.tcl    ./scripts/sim
% cp .solutions/scripts/sim/elaborate.tcl  ./scripts/sim
% cp .solutions/scripts/sim/simulate.tcl   ./scripts/sim
% cp .solutions/scripts/sim/run.tcl        ./scripts/sim
```

Create the main Verilog module `rtl/PWM.v` with the following content :

```verilog
`timescale 1ns / 100ps

module PWM (

   input  wire clk,
   input  wire [7:0] width,     // 8-bit configuration word to determine duty-cycle
   output wire pwm

   ) ;


   // 8-bit free-running counter
   reg [7:0] count = 1'b0 ;

   always @(posedge clk)
      count <= count + 1'b1 ;


   assign pwm = ( count[7:0] < width[7:0] ) ? 1'b1 : 1'b0 ;   // binary comparator (pure combinational block)

endmodule
```

Copy simulation sources as follows :


```
% cp .solutions/bench/ClockGen.v  ./bench
% cp .solutions/bench/tb_PWM.v    ./bench
```


Compile, elaborate and simulate the design with :

```
% make compile
% make elaborate
% make simulate
```

or simply type

```
% make sim
```

Observe the **variable duty-cycle waveform** generated by the circuit.


